<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Yahoo! Contact Center Agent Console (Concept)</title>
  <meta name="description" content="A simple, modern agent interface concept aligned to Yahoo! brand styling." />

  <style>
    /* 
      Brand alignment note:
      - This concept uses Yahoo‚Äôs commonly referenced purple (#6000D3 / close variants) and a deeper purple accent often associated with Yahoo branding.
        See: #6000D3 referenced as ‚ÄúYahoo‚Äôs Purple‚Äù (third-party) :contentReference[oaicite:0]{index=0}
        See: #410093 referenced as a Yahoo brand color (third-party) :contentReference[oaicite:1]{index=1}
      - For logo usage and brand feature restrictions, refer to Yahoo‚Äôs brand feature guidelines. :contentReference[oaicite:2]{index=2}
    */

    :root{
      --bg: #0b0b10;
      --panel: rgba(255,255,255,0.06);
      --panel-2: rgba(255,255,255,0.09);
      --stroke: rgba(255,255,255,0.12);
      --stroke-2: rgba(255,255,255,0.18);

      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.68);
      --faint: rgba(255,255,255,0.52);

      --brand: #6000D3;       /* commonly referenced Yahoo purple :contentReference[oaicite:3]{index=3} */
      --brand-2: #410093;     /* deeper purple referenced in brand-color aggregations :contentReference[oaicite:4]{index=4} */
      --ok: #2ee59d;
      --warn: #ffd36a;
      --bad: #ff5b6e;

      --shadow: 0 18px 50px rgba(0,0,0,0.45);
      --shadow-soft: 0 10px 30px rgba(0,0,0,0.25);

      --radius: 18px;
      --radius-sm: 12px;

      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }

    *{ box-sizing: border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: var(--sans);
      background:
        radial-gradient(1200px 600px at 12% -10%, rgba(96,0,211,0.35), transparent 60%),
        radial-gradient(900px 520px at 98% 10%, rgba(65,0,147,0.35), transparent 55%),
        radial-gradient(900px 650px at 60% 110%, rgba(96,0,211,0.18), transparent 58%),
        var(--bg);
      color: var(--text);
      letter-spacing: 0.1px;
      overflow: hidden;
    }

    /* Layout */
    .app{
      height:100%;
      display:grid;
      grid-template-rows: 64px 1fr;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 14px 18px;
      border-bottom: 1px solid var(--stroke);
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      backdrop-filter: blur(10px);
    }

    .brand{
      display:flex;
      gap: 12px;
      align-items:center;
      min-width: 260px;
    }

    .logoMark{
      width: 38px;
      height: 38px;
      border-radius: 14px;
      background:
        radial-gradient(18px 18px at 30% 30%, rgba(255,255,255,0.28), transparent 60%),
        linear-gradient(135deg, var(--brand), var(--brand-2));
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(255,255,255,0.14);
      display:grid;
      place-items:center;
      font-weight: 800;
      letter-spacing: -0.8px;
    }

    .brandTitle{
      display:flex;
      flex-direction:column;
      gap:2px;
      line-height:1.05;
    }
    .brandTitle .name{
      font-size: 14px;
      font-weight: 760;
    }
    .brandTitle .sub{
      font-size: 12px;
      color: var(--muted);
    }

    .topActions{
      display:flex;
      align-items:center;
      gap: 10px;
      flex-wrap: wrap;
      justify-content:flex-end;
    }

    .pill{
      display:flex;
      gap: 10px;
      align-items:center;
      padding: 8px 10px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,0.05);
      border-radius: 999px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      max-width: 520px;
      overflow:hidden;
    }
    .pill .dot{
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: var(--ok);
      box-shadow: 0 0 0 6px rgba(46,229,157,0.14);
      flex: 0 0 auto;
    }
    .pill .meta{
      display:flex;
      flex-direction:column;
      gap:2px;
      overflow:hidden;
      min-width: 0;
    }
    .pill .meta .t{
      font-size: 12px;
      color: var(--muted);
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }
    .pill .meta .v{
      font-size: 13px;
      font-weight: 650;
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }

    .btn{
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      border-radius: 12px;
      padding: 9px 10px;
      display:inline-flex;
      align-items:center;
      gap: 8px;
      cursor:pointer;
      user-select:none;
      transition: transform .08s ease, background .12s ease, border-color .12s ease;
      box-shadow: 0 10px 26px rgba(0,0,0,0.18);
      font-weight: 650;
      font-size: 13px;
    }
    .btn:hover{ background: rgba(255,255,255,0.09); border-color: var(--stroke-2); }
    .btn:active{ transform: translateY(1px); }
    .btn.primary{
      border-color: rgba(96,0,211,0.55);
      background: linear-gradient(135deg, rgba(96,0,211,0.92), rgba(65,0,147,0.88));
    }
    .btn.primary:hover{
      background: linear-gradient(135deg, rgba(96,0,211,0.98), rgba(65,0,147,0.92));
    }
    .btn.danger{
      border-color: rgba(255,91,110,0.45);
      background: rgba(255,91,110,0.12);
    }

    .main{
      height: calc(100vh - 64px);
      display:grid;
      grid-template-columns: 1.35fr 0.95fr;
      gap: 14px;
      padding: 14px;
    }

    .col{
      display:grid;
      grid-template-rows: 1fr auto;
      gap: 14px;
      min-width: 0;
      min-height: 0;
    }

    .card{
      background: rgba(255,255,255,0.05);
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      min-height: 0;
    }
    .cardHeader{
      padding: 12px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      border-bottom: 1px solid var(--stroke);
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
    }
    .cardHeader .title{
      display:flex;
      flex-direction:column;
      gap: 2px;
      min-width:0;
    }
    .cardHeader .title h2{
      margin:0;
      font-size: 13px;
      font-weight: 780;
      letter-spacing: 0.2px;
    }
    .cardHeader .title p{
      margin:0;
      font-size: 12px;
      color: var(--muted);
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }
    .cardBody{
      padding: 12px 14px;
      min-height: 0;
      overflow:auto;
    }

    .split{
      display:grid;
      grid-template-rows: auto 1fr;
      min-height: 0;
    }

    /* Transcript */
    .timeline{
      display:flex;
      flex-direction:column;
      gap: 10px;
      padding-bottom: 6px;
    }
    .msg{
      display:flex;
      gap: 10px;
      align-items:flex-start;
    }
    .avatar{
      width: 32px;
      height: 32px;
      border-radius: 12px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,0.06);
      display:grid;
      place-items:center;
      font-weight: 800;
      color: rgba(255,255,255,0.9);
      flex: 0 0 auto;
    }
    .avatar.agent{
      background: linear-gradient(135deg, rgba(96,0,211,0.45), rgba(65,0,147,0.35));
      border-color: rgba(96,0,211,0.55);
    }
    .bubble{
      max-width: 78ch;
      background: rgba(255,255,255,0.06);
      border: 1px solid var(--stroke);
      border-radius: 16px;
      padding: 10px 12px;
      box-shadow: 0 8px 22px rgba(0,0,0,0.22);
      min-width: 0;
    }
    .bubble .who{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap: 10px;
      margin-bottom: 6px;
      color: var(--muted);
      font-size: 12px;
    }
    .bubble .who strong{
      color: var(--text);
      font-weight: 760;
      font-size: 12px;
    }
    .bubble .text{
      font-size: 13px;
      line-height: 1.35;
      color: rgba(255,255,255,0.90);
      white-space: pre-wrap;
      word-wrap: break-word;
    }
    .bubble.agent{
      border-color: rgba(96,0,211,0.35);
      background: linear-gradient(135deg, rgba(96,0,211,0.14), rgba(255,255,255,0.05));
    }

    .tag{
      font-family: var(--mono);
      font-size: 11px;
      color: rgba(255,255,255,0.72);
      background: rgba(0,0,0,0.22);
      border: 1px solid rgba(255,255,255,0.14);
      padding: 3px 7px;
      border-radius: 999px;
    }

    /* Composer */
    .composer{
      display:grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
      align-items:end;
    }
    .field{
      display:flex;
      flex-direction:column;
      gap: 8px;
    }
    textarea{
      width:100%;
      resize:none;
      border-radius: 16px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      padding: 12px 12px;
      outline:none;
      font: 13px/1.35 var(--sans);
      min-height: 56px;
      max-height: 180px;
      box-shadow: 0 10px 24px rgba(0,0,0,0.18);
    }
    textarea:focus{
      border-color: rgba(96,0,211,0.7);
      box-shadow: 0 0 0 5px rgba(96,0,211,0.18), 0 10px 24px rgba(0,0,0,0.18);
    }
    .helperRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      flex-wrap: wrap;
    }
    .quick{
      display:flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .chip{
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,0.04);
      color: rgba(255,255,255,0.86);
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 12px;
      cursor:pointer;
      transition: background .12s ease, border-color .12s ease, transform .08s ease;
      user-select:none;
    }
    .chip:hover{ background: rgba(255,255,255,0.08); border-color: var(--stroke-2); }
    .chip:active{ transform: translateY(1px); }

    /* Right rail */
    .grid2{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    .kv{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .k{
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,0.05);
      border-radius: var(--radius-sm);
      padding: 10px 10px;
      display:flex;
      flex-direction:column;
      gap: 6px;
      min-width:0;
    }
    .k .label{
      font-size: 11px;
      color: var(--muted);
    }
    .k .value{
      font-size: 13px;
      font-weight: 720;
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }

    .statusRow{
      display:flex;
      gap: 8px;
      align-items:center;
      flex-wrap: wrap;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,0.04);
      font-size: 12px;
      color: rgba(255,255,255,0.86);
      cursor:pointer;
      user-select:none;
    }
    .badge .mini{
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--ok);
      box-shadow: 0 0 0 6px rgba(46,229,157,0.12);
    }
    .badge.warn .mini{ background: var(--warn); box-shadow: 0 0 0 6px rgba(255,211,106,0.12); }
    .badge.bad .mini{ background: var(--bad); box-shadow: 0 0 0 6px rgba(255,91,110,0.12); }

    .sectionTitle{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      margin: 2px 0 8px 0;
    }
    .sectionTitle h3{
      margin:0;
      font-size: 12px;
      font-weight: 780;
      color: rgba(255,255,255,0.92);
      letter-spacing: 0.2px;
    }
    .sectionTitle span{
      font-size: 12px;
      color: var(--muted);
      font-family: var(--mono);
    }

    .list{
      display:flex;
      flex-direction:column;
      gap: 8px;
    }
    .item{
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,0.04);
      border-radius: var(--radius-sm);
      padding: 10px 10px;
      display:flex;
      flex-direction:column;
      gap: 4px;
    }
    .item .headline{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      font-size: 12px;
      font-weight: 760;
    }
    .item .desc{
      font-size: 12px;
      color: var(--muted);
      line-height: 1.35;
    }

    .searchRow{
      display:flex;
      gap: 8px;
      align-items:center;
    }
    input[type="search"]{
      flex:1;
      width:100%;
      border-radius: 14px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      padding: 10px 10px;
      outline:none;
      font: 13px/1.2 var(--sans);
    }
    input[type="search"]:focus{
      border-color: rgba(96,0,211,0.7);
      box-shadow: 0 0 0 5px rgba(96,0,211,0.18);
    }

    .note{
      width:100%;
      min-height: 92px;
      border-radius: 16px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,0.05);
      color: var(--text);
      padding: 10px 10px;
      outline:none;
      font: 13px/1.35 var(--sans);
    }

    .footerHint{
      color: var(--faint);
      font-size: 11px;
      line-height: 1.35;
    }

    /* Small screens */
    @media (max-width: 980px){
      body{ overflow:auto; }
      .app{ height:auto; }
      .main{
        height:auto;
        grid-template-columns: 1fr;
      }
      .col{ min-height: 520px; }
    }
  </style>
</head>

<body>
  <div class="app">
    <!-- TOP BAR -->
    <header class="topbar">
      <div class="brand">
        <div class="logoMark" aria-hidden="true">Y!</div>
        <div class="brandTitle">
          <div class="name">Agent Console</div>
          <div class="sub">Customer: Yahoo! ‚Ä¢ Omni-channel interactions</div>
        </div>
      </div>

      <div class="topActions">
        <div class="pill" title="Session status">
          <div class="dot" id="agentDot"></div>
          <div class="meta">
            <div class="t">Agent</div>
            <div class="v" id="agentStatusText">Available ‚Ä¢ Queue: Billing</div>
          </div>
        </div>

        <button class="btn" id="btnMute" type="button" aria-pressed="false" title="Mute / unmute microphone">
          <span aria-hidden="true">üéôÔ∏è</span><span>Mute</span>
        </button>
        <button class="btn" id="btnHold" type="button" aria-pressed="false" title="Place caller on hold">
          <span aria-hidden="true">‚è∏Ô∏è</span><span>Hold</span>
        </button>
        <button class="btn primary" id="btnStart" type="button" title="Start / connect interaction">
          <span aria-hidden="true">‚ñ∂</span><span>Connect</span>
        </button>
        <button class="btn danger" id="btnEnd" type="button" title="End interaction">
          <span aria-hidden="true">‚èπ</span><span>End</span>
        </button>
      </div>
    </header>

    <!-- MAIN GRID -->
    <main class="main" role="main">
      <!-- LEFT: TRANSCRIPT + COMPOSER -->
      <section class="col">
        <div class="card split" aria-label="Interaction transcript">
          <div class="cardHeader">
            <div class="title">
              <h2>Conversation</h2>
              <p id="sessionLine">Channel: Chat ‚Ä¢ Interaction ID: YH-24819 ‚Ä¢ Duration: 00:00</p>
            </div>
            <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
              <span class="tag" id="priorityTag">Priority: Normal</span>
              <span class="tag" id="sentimentTag">Sentiment: Neutral</span>
            </div>
          </div>

          <div class="cardBody" id="transcript" tabindex="0" aria-live="polite">
            <div class="timeline" id="timeline">
              <div class="msg">
                <div class="avatar" aria-hidden="true">C</div>
                <div class="bubble">
                  <div class="who"><strong>Customer</strong><span>Just now</span></div>
                  <div class="text">Hi ‚Äî I can‚Äôt access my Yahoo Mail inbox. It keeps saying ‚Äútemporary issue.‚Äù</div>
                </div>
              </div>

              <div class="msg">
                <div class="avatar agent" aria-hidden="true">A</div>
                <div class="bubble agent">
                  <div class="who"><strong>Agent</strong><span>Just now</span></div>
                  <div class="text">Thanks for reaching out. I can help with that. Are you seeing the issue on web, mobile app, or both?</div>
                </div>
              </div>

              <div class="msg">
                <div class="avatar" aria-hidden="true">C</div>
                <div class="bubble">
                  <div class="who"><strong>Customer</strong><span>Just now</span></div>
                  <div class="text">Web. I tried Chrome and Safari.</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="card" aria-label="Reply composer">
          <div class="cardHeader">
            <div class="title">
              <h2>Reply</h2>
              <p>Use quick replies or type a tailored response. Notes and disposition are on the right.</p>
            </div>
            <div style="display:flex; gap:8px; align-items:center;">
              <button class="btn" id="btnWrapUp" type="button" title="Open wrap-up checklist">
                <span aria-hidden="true">‚úÖ</span><span>Wrap-up</span>
              </button>
            </div>
          </div>

          <div class="cardBody">
            <div class="helperRow" style="margin-bottom:10px;">
              <div class="quick" aria-label="Quick replies">
                <div class="chip" data-chip="Thanks ‚Äî I can help. Let‚Äôs try clearing cache/cookies for yahoo.com, then sign in again.">Clear cache</div>
                <div class="chip" data-chip="Are you able to sign in from a private/incognito window?">Incognito test</div>
                <div class="chip" data-chip="Do you see any error code or timestamp on the page?">Get error details</div>
                <div class="chip" data-chip="Let‚Äôs confirm: can you access other Yahoo services (News, Finance) while signed in?">Service check</div>
              </div>
              <div class="footerHint">Enter to send ‚Ä¢ Shift+Enter for a new line</div>
            </div>

            <div class="composer">
              <div class="field">
                <textarea id="composer" placeholder="Type your message‚Ä¶"></textarea>
              </div>
              <div style="display:flex; flex-direction:column; gap:8px; align-items:stretch;">
                <button class="btn primary" id="btnSend" type="button" title="Send message">
                  <span aria-hidden="true">‚Ü©</span><span>Send</span>
                </button>
                <button class="btn" id="btnAddSystem" type="button" title="Log an internal system event to the transcript">
                  <span aria-hidden="true">üßæ</span><span>Log</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- RIGHT: CUSTOMER CONTEXT + ACTIONS -->
      <aside class="col" aria-label="Customer context and tools">
        <div class="card" aria-label="Customer overview">
          <div class="cardHeader">
            <div class="title">
              <h2>Customer Profile</h2>
              <p>Unified context for faster resolution</p>
            </div>
            <div class="statusRow">
              <div class="badge" id="badgeAuth" role="button" tabindex="0" title="Authentication status">
                <span class="mini" aria-hidden="true"></span><span id="authText">Authenticated</span>
              </div>
              <div class="badge warn" id="badgeSLA" role="button" tabindex="0" title="SLA / urgency">
                <span class="mini" aria-hidden="true"></span><span id="slaText">SLA: 12m</span>
              </div>
            </div>
          </div>

          <div class="cardBody">
            <div class="kv" aria-label="Key-value details">
              <div class="k"><div class="label">Name</div><div class="value">Jordan Lee</div></div>
              <div class="k"><div class="label">Yahoo ID</div><div class="value">jl***@yahoo.com</div></div>
              <div class="k"><div class="label">Tier</div><div class="value">Standard</div></div>
              <div class="k"><div class="label">Region</div><div class="value">US ‚Ä¢ Mountain</div></div>
              <div class="k"><div class="label">Channel</div><div class="value">Chat</div></div>
              <div class="k"><div class="label">Last login</div><div class="value">Today ‚Ä¢ 08:42</div></div>
            </div>

            <div style="height:12px;"></div>

            <div class="sectionTitle">
              <h3>Next Best Actions</h3>
              <span>Recommended</span>
            </div>
            <div class="list" id="nbaList">
              <div class="item">
                <div class="headline">
                  <span>Verify service status</span>
                  <span class="tag">Step 1</span>
                </div>
                <div class="desc">Check known incidents impacting Yahoo Mail web access for the customer‚Äôs region.</div>
              </div>
              <div class="item">
                <div class="headline">
                  <span>Browser remediation</span>
                  <span class="tag">Step 2</span>
                </div>
                <div class="desc">Guide through cache/cookie reset for yahoo.com, then retry sign-in in a private window.</div>
              </div>
              <div class="item">
                <div class="headline">
                  <span>Escalate if persistent</span>
                  <span class="tag">Step 3</span>
                </div>
                <div class="desc">Capture error text + timestamp and route to Mail Web Access queue with diagnostic notes.</div>
              </div>
            </div>
          </div>
        </div>

        <div class="card" aria-label="Knowledge and wrap-up">
          <div class="cardHeader">
            <div class="title">
              <h2>Tools</h2>
              <p>Knowledge, disposition, and internal notes</p>
            </div>
            <div style="display:flex; gap:8px; flex-wrap:wrap;">
              <button class="btn" id="btnCopySummary" type="button" title="Copy interaction summary to clipboard">
                <span aria-hidden="true">üìã</span><span>Copy Summary</span>
              </button>
            </div>
          </div>

          <div class="cardBody">
            <div class="sectionTitle">
              <h3>Knowledge Search</h3>
              <span>KB</span>
            </div>
            <div class="searchRow">
              <input id="kbSearch" type="search" placeholder="Search articles (e.g., ‚Äútemporary issue web mail‚Äù)‚Ä¶" />
              <button class="btn" id="btnKb" type="button"><span aria-hidden="true">üîé</span><span>Search</span></button>
            </div>
            <div style="height:10px;"></div>
            <div class="list" id="kbResults" aria-label="Knowledge results">
              <div class="item">
                <div class="headline"><span>Mail web sign-in troubleshooting</span><span class="tag">KB-1021</span></div>
                <div class="desc">Private window test, cache/cookies, extension isolation, DNS flush guidance.</div>
              </div>
              <div class="item">
                <div class="headline"><span>‚ÄúTemporary issue‚Äù message on Yahoo Mail</span><span class="tag">KB-1184</span></div>
                <div class="desc">Likely causes include browser storage, service degradation, or account lock verification.</div>
              </div>
            </div>

            <div style="height:14px;"></div>

            <div class="sectionTitle">
              <h3>Disposition</h3>
              <span>Wrap-up</span>
            </div>
            <div class="kv">
              <div class="k">
                <div class="label">Category</div>
                <div class="value">
                  <select id="dispCategory" style="width:100%; border-radius:12px; border:1px solid var(--stroke); background:rgba(255,255,255,0.06); color:var(--text); padding:10px;">
                    <option>Mail Access</option>
                    <option>Account Recovery</option>
                    <option>Billing</option>
                    <option>Security</option>
                  </select>
                </div>
              </div>
              <div class="k">
                <div class="label">Outcome</div>
                <div class="value">
                  <select id="dispOutcome" style="width:100%; border-radius:12px; border:1px solid var(--stroke); background:rgba(255,255,255,0.06); color:var(--text); padding:10px;">
                    <option>In progress</option>
                    <option>Resolved</option>
                    <option>Escalated</option>
                    <option>Callback scheduled</option>
                  </select>
                </div>
              </div>
            </div>

            <div style="height:12px;"></div>

            <div class="sectionTitle">
              <h3>Internal Notes</h3>
              <span>Private</span>
            </div>
            <textarea class="note" id="notes" placeholder="Capture troubleshooting steps, error strings, timestamps, and escalation details‚Ä¶"></textarea>

            <div style="height:10px;"></div>
            <div class="footerHint">
              This is a concept UI. Avoid using Yahoo logos/brand features without explicit permission; follow Yahoo brand feature guidelines. :contentReference[oaicite:5]{index=5}
            </div>
          </div>
        </div>
      </aside>
    </main>
  </div>

  <script>
    (function(){
      const $ = (sel, root=document) => root.querySelector(sel);

      const timeline = $("#timeline");
      const transcript = $("#transcript");
      const composer = $("#composer");
      const btnSend = $("#btnSend");
      const btnAddSystem = $("#btnAddSystem");

      const btnStart = $("#btnStart");
      const btnEnd = $("#btnEnd");
      const btnMute = $("#btnMute");
      const btnHold = $("#btnHold");

      const agentDot = $("#agentDot");
      const agentStatusText = $("#agentStatusText");

      const sessionLine = $("#sessionLine");
      const priorityTag = $("#priorityTag");
      const sentimentTag = $("#sentimentTag");

      const notes = $("#notes");
      const dispCategory = $("#dispCategory");
      const dispOutcome = $("#dispOutcome");

      const kbSearch = $("#kbSearch");
      const btnKb = $("#btnKb");
      const kbResults = $("#kbResults");

      const btnCopySummary = $("#btnCopySummary");
      const btnWrapUp = $("#btnWrapUp");

      let connected = false;
      let muted = false;
      let onHold = false;

      let startTs = null;
      let timer = null;

      const pad2 = (n) => String(n).padStart(2, "0");
      const fmtDur = (ms) => {
        const s = Math.floor(ms/1000);
        const mm = Math.floor(s/60);
        const ss = s % 60;
        return `${pad2(mm)}:${pad2(ss)}`;
      };

      function nowLabel(){
        const d = new Date();
        return d.toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" });
      }

      function scrollToBottom(){
        transcript.scrollTop = transcript.scrollHeight;
      }

      function addMessage({who="Agent", text="", kind="agent"}){
        const wrap = document.createElement("div");
        wrap.className = "msg";

        const av = document.createElement("div");
        av.className = "avatar" + (kind === "agent" ? " agent" : "");
        av.setAttribute("aria-hidden", "true");
        av.textContent = kind === "agent" ? "A" : (kind === "system" ? "S" : "C");

        const bubble = document.createElement("div");
        bubble.className = "bubble" + (kind === "agent" ? " agent" : "");

        const whoRow = document.createElement("div");
        whoRow.className = "who";

        const left = document.createElement("strong");
        left.textContent = who;

        const right = document.createElement("span");
        right.textContent = nowLabel();

        whoRow.appendChild(left);
        whoRow.appendChild(right);

        const body = document.createElement("div");
        body.className = "text";
        body.textContent = text;

        bubble.appendChild(whoRow);
        bubble.appendChild(body);

        wrap.appendChild(av);
        wrap.appendChild(bubble);

        timeline.appendChild(wrap);
        scrollToBottom();
      }

      function addSystemEvent(text){
        addMessage({ who: "System", text, kind: "system" });
      }

      function setConnected(value){
        connected = value;
        btnStart.querySelector("span:last-child").textContent = connected ? "Connected" : "Connect";
        btnStart.setAttribute("aria-pressed", String(connected));
        btnStart.style.opacity = connected ? "0.9" : "1";

        agentDot.style.background = connected ? "var(--ok)" : "var(--warn)";
        agentDot.style.boxShadow = connected ? "0 0 0 6px rgba(46,229,157,0.14)" : "0 0 0 6px rgba(255,211,106,0.14)";
        agentStatusText.textContent = connected ? "In Interaction ‚Ä¢ Queue: Billing" : "Available ‚Ä¢ Queue: Billing";

        if(value){
          startTs = Date.now();
          if(timer) clearInterval(timer);
          timer = setInterval(() => {
            const dur = fmtDur(Date.now() - startTs);
            sessionLine.textContent = `Channel: Chat ‚Ä¢ Interaction ID: YH-24819 ‚Ä¢ Duration: ${dur}`;
          }, 500);
          addSystemEvent("Interaction connected.");
        } else {
          if(timer) clearInterval(timer);
          timer = null;
          startTs = null;
          sessionLine.textContent = "Channel: Chat ‚Ä¢ Interaction ID: YH-24819 ‚Ä¢ Duration: 00:00";
        }
      }

      function setMuted(value){
        muted = value;
        btnMute.setAttribute("aria-pressed", String(muted));
        btnMute.querySelector("span:last-child").textContent = muted ? "Muted" : "Mute";
        if(muted) addSystemEvent("Microphone muted.");
        else addSystemEvent("Microphone unmuted.");
      }

      function setHold(value){
        onHold = value;
        btnHold.setAttribute("aria-pressed", String(onHold));
        btnHold.querySelector("span:last-child").textContent = onHold ? "On Hold" : "Hold";
        if(onHold) addSystemEvent("Customer placed on hold.");
        else addSystemEvent("Hold released.");
      }

      function setSentiment(level){
        sentimentTag.textContent = `Sentiment: ${level}`;
      }

      function setPriority(level){
        priorityTag.textContent = `Priority: ${level}`;
      }

      // Quick replies
      document.querySelectorAll(".chip").forEach(chip => {
        chip.addEventListener("click", () => {
          const t = chip.getAttribute("data-chip") || "";
          composer.value = t;
          composer.focus();
          autoGrow();
        });
      });

      // Send behavior
      function autoGrow(){
        composer.style.height = "auto";
        composer.style.height = Math.min(composer.scrollHeight, 180) + "px";
      }
      composer.addEventListener("input", autoGrow);

      function sendAgentMessage(){
        const text = composer.value.trim();
        if(!text) return;
        addMessage({ who: "Agent", text, kind:"agent" });
        composer.value = "";
        autoGrow();

        // Demo heuristics: sentiment/priority changes
        const lower = text.toLowerCase();
        if(lower.includes("sorry") || lower.includes("frustrat") || lower.includes("issue")){
          setSentiment("Concerned");
        }
        if(lower.includes("escalat") || lower.includes("urgent")){
          setPriority("High");
        }
      }

      btnSend.addEventListener("click", sendAgentMessage);
      composer.addEventListener("keydown", (e) => {
        if(e.key === "Enter" && !e.shiftKey){
          e.preventDefault();
          sendAgentMessage();
        }
      });

      btnAddSystem.addEventListener("click", () => {
        addSystemEvent("Agent logged an internal note.");
      });

      // Call controls
      btnStart.addEventListener("click", () => {
        if(!connected) setConnected(true);
      });

      btnEnd.addEventListener("click", () => {
        if(!connected) return;

        const summary = buildSummary();
        addSystemEvent("Interaction ended.");
        addSystemEvent("Summary captured for wrap-up.");

        // Slightly enrich the transcript with a wrap-up block:
        addMessage({
          who: "System",
          kind: "system",
          text:
`WRAP-UP PREVIEW
Category: ${dispCategory.value}
Outcome: ${dispOutcome.value}
Notes: ${notes.value.trim() ? notes.value.trim() : "(none)"}

Summary:
${summary}`
        });

        setConnected(false);
        setMuted(false);
        setHold(false);
        setSentiment("Neutral");
        setPriority("Normal");
      });

      btnMute.addEventListener("click", () => setMuted(!muted));
      btnHold.addEventListener("click", () => setHold(!onHold));

      // KB search (mock)
      btnKb.addEventListener("click", () => {
        const q = (kbSearch.value || "").trim().toLowerCase();
        kbResults.innerHTML = "";

        const items = [
          { id:"KB-1184", title:"‚ÄúTemporary issue‚Äù message on Yahoo Mail", desc:"Service degradation checks, browser storage reset, sign-in verification, and escalation criteria." },
          { id:"KB-1021", title:"Mail web sign-in troubleshooting", desc:"Private window test, cache/cookies, extension isolation, DNS flush guidance." },
          { id:"KB-1402", title:"Account lock and verification prompts", desc:"Recognize lock signals, guide verification, capture timestamps for support." },
          { id:"KB-1310", title:"Browser extensions causing web mail failures", desc:"Disable extensions, test profiles, and document conflicting add-ons." }
        ];

        const filtered = q ? items.filter(x => (x.title + " " + x.desc).toLowerCase().includes(q)) : items;

        filtered.slice(0, 4).forEach((x) => {
          const el = document.createElement("div");
          el.className = "item";
          el.innerHTML = `
            <div class="headline"><span>${escapeHtml(x.title)}</span><span class="tag">${x.id}</span></div>
            <div class="desc">${escapeHtml(x.desc)}</div>
          `;
          kbResults.appendChild(el);
        });

        if(filtered.length === 0){
          const el = document.createElement("div");
          el.className = "item";
          el.innerHTML = `<div class="headline"><span>No results</span><span class="tag">KB</span></div><div class="desc">Try different keywords.</div>`;
          kbResults.appendChild(el);
        }
      });

      // Copy summary
      function buildSummary(){
        // Very simple extract of ‚Äúlast few‚Äù transcript lines for a concise operational summary.
        const bubbles = Array.from(document.querySelectorAll(".bubble .text"));
        const last = bubbles.slice(-6).map(b => b.textContent.trim()).filter(Boolean);

        const noteText = (notes.value || "").trim();
        const diag = noteText ? `Diagnostics/Notes: ${noteText}` : "Diagnostics/Notes: (none)";

        return [
          `Customer issue: Unable to access Yahoo Mail inbox on web (‚Äútemporary issue‚Äù).`,
          `Troubleshooting: Guided browser-based isolation steps (incognito, cache/cookies, extensions).`,
          `Disposition: ${dispCategory.value} ‚Ä¢ ${dispOutcome.value}.`,
          diag,
          `Recent transcript highlights:`,
          ...last.map((t, i) => `  - ${t}`)
        ].join("\n");
      }

      btnCopySummary.addEventListener("click", async () => {
        const summary = buildSummary();
        try{
          await navigator.clipboard.writeText(summary);
          addSystemEvent("Summary copied to clipboard.");
        }catch{
          // Fallback: prompt
          window.prompt("Copy summary:", summary);
        }
      });

      // Wrap-up helper
      btnWrapUp.addEventListener("click", () => {
        addSystemEvent("Wrap-up checklist opened (concept).");
        notes.focus();
      });

      // Utilities
      function escapeHtml(s){
        return String(s)
          .replaceAll("&","&amp;")
          .replaceAll("<","&lt;")
          .replaceAll(">","&gt;")
          .replaceAll('"',"&quot;")
          .replaceAll("'","&#039;");
      }

      // Initial state
      autoGrow();
      scrollToBottom();
      setConnected(false);
    })();
  </script>
</body>
</html>

